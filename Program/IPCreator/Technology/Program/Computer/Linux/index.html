<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon.ico">
  <link rel="mask-icon" href="/img/apple-touch-icon.png" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"hazyman.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.json"};
  </script>

  <meta name="description" content="开源的奇迹，取之于众，用之于众。">
<meta name="keywords" content="Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux">
<meta property="og:url" content="https://hazyman.com/Program/IPCreator/Technology/Program/Computer/Linux/index.html">
<meta property="og:site_name" content="生命之旅">
<meta property="og:description" content="开源的奇迹，取之于众，用之于众。">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-04-09T07:23:38.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux">
<meta name="twitter:description" content="开源的奇迹，取之于众，用之于众。">

<link rel="canonical" href="https://hazyman.com/Program/IPCreator/Technology/Program/Computer/Linux/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Linux | 生命之旅</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="生命之旅" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">生命之旅</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Thinker, Doer, Innovator.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://hazyman.com/Program/IPCreator/Technology/Program/Computer/Linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/img/content/Kick-Off.jpg">
      <meta itemprop="name" content="IPCreator">
      <meta itemprop="description" content="Life is a journey.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="生命之旅">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Linux
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Program/" itemprop="url" rel="index"><span itemprop="name">Program</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/Program/IPCreator/Technology/Program/Computer/Linux/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/Program/IPCreator/Technology/Program/Computer/Linux/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img data-src="http://p53s4d2qk.bkt.clouddn.com/linux20180329.jpg?imageMogr2/thumbnail/!75p" alt="linux20180329.jpg"></p>
<blockquote>
<p>开源的奇迹，取之于众，用之于众。</p>
</blockquote>
<a id="more"></a>
<h2 id="User-space-与-Kernel-space"><a href="#User-space-与-Kernel-space" class="headerlink" title="User space 与 Kernel space"></a><a href="http://www.ruanyifeng.com/blog/2016/12/user_space_vs_kernel_space.html" target="_blank" rel="noopener">User space 与 Kernel space</a></h2><p><img data-src="http://www.ruanyifeng.com/blogimg/asset/2016/bg2016120201-2.png" alt></p>
<p>简单说，Kernel space 是 Linux 内核的运行空间，User space 是用户程序的运行空间。为了安全，它们是隔离的，即使用户的程序崩溃了，内核也不受影响。Kernel space 可以执行任意命令，调用系统的一切资源；User space 只能执行简单的运算，不能直接调用系统资源，必须通过系统接口（又称 system call），才能向内核发出指令。</p>
<h2 id="如何读懂火焰图？"><a href="#如何读懂火焰图？" class="headerlink" title="如何读懂火焰图？"></a><a href="http://www.ruanyifeng.com/blog/2017/09/flame-graph.html" target="_blank" rel="noopener">如何读懂火焰图？</a></h2><h2 id="Linux-的启动流程"><a href="#Linux-的启动流程" class="headerlink" title="Linux 的启动流程"></a><a href="http://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html" target="_blank" rel="noopener">Linux 的启动流程</a></h2><p>作者： 阮一峰<br>日期： 2013年8月17日</p>
<p>半年前，我写了《计算机是如何启动的？》，探讨BIOS和主引导记录的作用。</p>
<p>那篇文章不涉及操作系统，只与主板的板载程序有关。今天，我想接着往下写，探讨操作系统接管硬件以后发生的事情，也就是操作系统的启动流程。</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/201308/bg2013081701.png" alt></p>
<p>这个部分比较有意思。因为在BIOS阶段，计算机的行为基本上被写死了，程序员可以做的事情并不多；但是，一旦进入操作系统，程序员几乎可以定制所有方面。所以，这个部分与程序员的关系更密切。</p>
<p>我主要关心的是Linux操作系统，它是目前服务器端的主流操作系统。下面的内容针对的是Debian发行版，因为我对其他发行版不够熟悉。</p>
<p>第一步、加载内核</p>
<p>操作系统接管硬件以后，首先读入 /boot 目录下的内核文件。</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/201308/bg2013081702.png" alt></p>
<p>以我的电脑为例，/boot 目录下面大概是这样一些文件：</p>
<p>　　$ ls /boot<br>　　<br>　　config-3.2.0-3-amd64<br>　　config-3.2.0-4-amd64<br>　　grub<br>　　initrd.img-3.2.0-3-amd64<br>　　initrd.img-3.2.0-4-amd64<br>　　System.map-3.2.0-3-amd64<br>　　System.map-3.2.0-4-amd64<br>　　vmlinuz-3.2.0-3-amd64<br>　　vmlinuz-3.2.0-4-amd64<br>　　<br>第二步、启动初始化进程</p>
<p>内核文件加载以后，就开始运行第一个程序 /sbin/init，它的作用是初始化系统环境。</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/201308/bg2013081703.png" alt></p>
<p>由于init是第一个运行的程序，它的进程编号（pid）就是1。其他所有进程都从它衍生，都是它的子进程。</p>
<p>第三步、确定运行级别</p>
<p>许多程序需要开机启动。它们在Windows叫做”服务”（service），在Linux就叫做”守护进程”（daemon）。</p>
<p>init进程的一大任务，就是去运行这些开机启动的程序。但是，不同的场合需要启动不同的程序，比如用作服务器时，需要启动Apache，用作桌面就不需要。Linux允许为不同的场合，分配不同的开机启动程序，这就叫做”运行级别”（runlevel）。也就是说，启动时根据”运行级别”，确定要运行哪些程序。</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/201308/bg2013081704.png" alt></p>
<p>Linux预置七种运行级别（0-6）。一般来说，0是关机，1是单用户模式（也就是维护模式），6是重启。运行级别2-5，各个发行版不太一样，对于Debian来说，都是同样的多用户模式（也就是正常模式）。</p>
<p>init进程首先读取文件 /etc/inittab，它是运行级别的设置文件。如果你打开它，可以看到第一行是这样的：</p>
<p>　　id:2:initdefault:<br>　　<br>initdefault的值是2，表明系统启动时的运行级别为2。如果需要指定其他级别，可以手动修改这个值。</p>
<p>那么，运行级别2有些什么程序呢，系统怎么知道每个级别应该加载哪些程序呢？……回答是每个运行级别在/etc目录下面，都有一个对应的子目录，指定要加载的程序。</p>
<p>　　/etc/rc0.d<br>　　/etc/rc1.d<br>　　/etc/rc2.d<br>　　/etc/rc3.d<br>　　/etc/rc4.d<br>　　/etc/rc5.d<br>　　/etc/rc6.d<br>　　<br>上面目录名中的”rc”，表示run command（运行程序），最后的d表示directory（目录）。下面让我们看看 /etc/rc2.d 目录中到底指定了哪些程序。</p>
<p>　　$ ls  /etc/rc2.d<br>　　<br>　　README<br>　　S01motd<br>　　S13rpcbind<br>　　S14nfs-common<br>　　S16binfmt-support<br>　　S16rsyslog<br>　　S16sudo<br>　　S17apache2<br>　　S18acpid<br>　　…<br>　　<br>可以看到，除了第一个文件README以外，其他文件名都是”字母S+两位数字+程序名”的形式。字母S表示Start，也就是启动的意思（启动脚本的运行参数为start），如果这个位置是字母K，就代表Kill（关闭），即如果从其他运行级别切换过来，需要关闭的程序（启动脚本的运行参数为stop）。后面的两位数字表示处理顺序，数字越小越早处理，所以第一个启动的程序是motd，然后是rpcbing、nfs……数字相同时，则按照程序名的字母顺序启动，所以rsyslog会先于sudo启动。</p>
<p>这个目录里的所有文件（除了README），就是启动时要加载的程序。如果想增加或删除某些程序，不建议手动修改 /etc/rcN.d 目录，最好是用一些专门命令进行管理（参考这里和这里）。</p>
<p>第四步、加载开机启动程序</p>
<p>前面提到，七种预设的”运行级别”各自有一个目录，存放需要开机启动的程序。不难想到，如果多个”运行级别”需要启动同一个程序，那么这个程序的启动脚本，就会在每一个目录里都有一个拷贝。这样会造成管理上的困扰：如果要修改启动脚本，岂不是每个目录都要改一遍？</p>
<p>Linux的解决办法，就是七个 /etc/rcN.d 目录里列出的程序，都设为链接文件，指向另外一个目录 /etc/init.d ，真正的启动脚本都统一放在这个目录中。init进程逐一加载开机启动程序，其实就是运行这个目录里的启动脚本。</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/201308/bg2013081705.png" alt></p>
<p>下面就是链接文件真正的指向。</p>
<p>　　$ ls -l /etc/rc2.d<br>　　<br>　　README<br>　　S01motd -&gt; ../init.d/motd<br>　　S13rpcbind -&gt; ../init.d/rpcbind<br>　　S14nfs-common -&gt; ../init.d/nfs-common<br>　　S16binfmt-support -&gt; ../init.d/binfmt-support<br>　　S16rsyslog -&gt; ../init.d/rsyslog<br>　　S16sudo -&gt; ../init.d/sudo<br>　　S17apache2 -&gt; ../init.d/apache2<br>　　S18acpid -&gt; ../init.d/acpid<br>　　…<br>　　<br>这样做的另一个好处，就是如果你要手动关闭或重启某个进程，直接到目录 /etc/init.d 中寻找启动脚本即可。比如，我要重启Apache服务器，就运行下面的命令：</p>
<p>　　$ sudo /etc/init.d/apache2 restart<br>　　<br>/etc/init.d 这个目录名最后一个字母d，是directory的意思，表示这是一个目录，用来与程序 /etc/init 区分。</p>
<p>第五步、用户登录</p>
<p>开机启动程序加载完毕以后，就要让用户登录了。</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/201308/bg2013081706.png" alt></p>
<p>一般来说，用户的登录方式有三种：</p>
<p>　　（1）命令行登录</p>
<p>　　（2）ssh登录</p>
<p>　　（3）图形界面登录</p>
<p>这三种情况，都有自己的方式对用户进行认证。</p>
<p>（1）命令行登录：init进程调用getty程序（意为get teletype），让用户输入用户名和密码。输入完成后，再调用login程序，核对密码（Debian还会再多运行一个身份核对程序/etc/pam.d/login）。如果密码正确，就从文件 /etc/passwd 读取该用户指定的shell，然后启动这个shell。</p>
<p>（2）ssh登录：这时系统调用sshd程序（Debian还会再运行/etc/pam.d/ssh ），取代getty和login，然后启动shell。</p>
<p>（3）图形界面登录：init进程调用显示管理器，Gnome图形界面对应的显示管理器为gdm（GNOME Display Manager），然后用户输入用户名和密码。如果密码正确，就读取/etc/gdm3/Xsession，启动用户的会话。</p>
<p>第六步、进入 login shell</p>
<p>所谓shell，简单说就是命令行界面，让用户可以直接与操作系统对话。用户登录时打开的shell，就叫做login shell。</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/201308/bg2013081707.png" alt></p>
<p>Debian默认的shell是Bash，它会读入一系列的配置文件。上一步的三种情况，在这一步的处理，也存在差异。</p>
<p>（1）命令行登录：首先读入 /etc/profile，这是对所有用户都有效的配置；然后依次寻找下面三个文件，这是针对当前用户的配置。</p>
<p>　　~/.bash_profile<br>　　~/.bash_login<br>　　~/.profile<br>　　<br>需要注意的是，这三个文件只要有一个存在，就不再读入后面的文件了。比如，要是 ~/.bash_profile 存在，就不会再读入后面两个文件了。</p>
<p>（2）ssh登录：与第一种情况完全相同。</p>
<p>（3）图形界面登录：只加载 /etc/profile 和 ~/.profile。也就是说，~/.bash_profile 不管有没有，都不会运行。</p>
<p>第七步，打开 non-login shell</p>
<p>老实说，上一步完成以后，Linux的启动过程就算结束了，用户已经可以看到命令行提示符或者图形界面了。但是，为了内容的完整，必须再介绍一下这一步。</p>
<p>用户进入操作系统以后，常常会再手动开启一个shell。这个shell就叫做 non-login shell，意思是它不同于登录时出现的那个shell，不读取/etc/profile和.profile等配置文件。</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/201308/bg2013081708.png" alt></p>
<p>non-login shell的重要性，不仅在于它是用户最常接触的那个shell，还在于它会读入用户自己的bash配置文件 ~/.bashrc。大多数时候，我们对于bash的定制，都是写在这个文件里面的。</p>
<p>你也许会问，要是不进入 non-login shell，岂不是.bashrc就不会运行了，因此bash 也就不能完成定制了？事实上，Debian已经考虑到这个问题了，请打开文件 ~/.profile，可以看到下面的代码：</p>
<p>　　if [ -n “$BASH_VERSION” ]; then<br>　　　　if [ -f “$HOME/.bashrc” ]; then<br>　　　　　　. “$HOME/.bashrc”<br>　　　　fi<br>　　fi<br>　　<br>上面代码先判断变量 $BASH_VERSION 是否有值，然后判断主目录下是否存在 .bashrc 文件，如果存在就运行该文件。第三行开头的那个点，是source命令的简写形式，表示运行某个文件，写成”source ~/.bashrc”也是可以的。</p>
<p>因此，只要运行～/.profile文件，～/.bashrc文件就会连带运行。但是上一节的第一种情况提到过，如果存在～/.bash_profile文件，那么有可能不会运行～/.profile文件。解决这个问题很简单，把下面代码写入.bash_profile就行了。</p>
<p>　　if [ -f ~/.profile ]; then<br>　　　　. ~/.profile<br>　　fi<br>　　<br>这样一来，不管是哪种情况，.bashrc都会执行，用户的设置可以放心地都写入这个文件了。</p>
<blockquote>
<p>Bash的设置之所以如此繁琐，是由于历史原因造成的。早期的时候，计算机运行速度很慢，载入配置文件需要很长时间，Bash的作者只好把配置文件分成了几个部分，阶段性载入。系统的通用设置放在 /etc/profile，用户个人的、需要被所有子进程继承的设置放在.profile，不需要被继承的设置放在.bashrc。</p>
</blockquote>
<p>顺便提一下，除了Linux以外， Mac OS X 使用的shell也是Bash。但是，它只加载.bash_profile，然后在.bash_profile里面调用.bashrc。而且，不管是ssh登录，还是在图形界面里启动shell窗口，都是如此。</p>
<p>参考链接</p>
<p>[1] Debian Wiki, Environment Variables</p>
<p>[2] Debian Wiki, Dot Files</p>
<p>[3] Debian Administration, An introduction to run-levels</p>
<p>[4] Debian Admin，Debian and Ubuntu Linux Run Levels</p>
<p>[5] Linux Information Project (LINFO), Runlevel Definition</p>
<p>[6] LinuxQuestions.org, What are run levels?</p>
<p>[7] Dalton Hubble, Bash Configurations Demystified</p>
<p>（完）</p>
<h2 id="Linux-守护进程的启动方法"><a href="#Linux-守护进程的启动方法" class="headerlink" title="Linux 守护进程的启动方法"></a><a href="http://www.ruanyifeng.com/blog/2016/02/linux-daemon.html" target="_blank" rel="noopener">Linux 守护进程的启动方法</a></h2><p>“守护进程”（daemon）就是一直在后台运行的进程（daemon）。</p>
<p>daemon英 [ˈdi:mən]   美 [‘dimən]<br>n.  （希腊神话中）半人半神的精灵; 守护神; [计]守护进程;</p>
<h2 id="Systemd-入门教程：命令篇"><a href="#Systemd-入门教程：命令篇" class="headerlink" title="Systemd 入门教程：命令篇"></a><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html" target="_blank" rel="noopener">Systemd 入门教程：命令篇</a></h2><h2 id="Systemd-入门教程：实战篇"><a href="#Systemd-入门教程：实战篇" class="headerlink" title="Systemd 入门教程：实战篇"></a><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html" target="_blank" rel="noopener">Systemd 入门教程：实战篇</a></h2><h2 id="Systemd-定时器教程"><a href="#Systemd-定时器教程" class="headerlink" title="Systemd 定时器教程"></a><a href="http://www.ruanyifeng.com/blog/2018/03/systemd-timer.html" target="_blank" rel="noopener">Systemd 定时器教程</a></h2><p>Systemd 作为 Linux 的系统启动器，功能强大。</p>
<p>本文通过一个简单例子，介绍 Systemd 如何设置定时任务。这不仅实用，而且可以作为 Systemd 的上手教程。</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/2018/bg2018033001.jpg" alt></p>
<h2 id="理解Linux系统负荷"><a href="#理解Linux系统负荷" class="headerlink" title="理解Linux系统负荷"></a><a href="http://www.ruanyifeng.com/blog/2011/07/linux_load_average_explained.html" target="_blank" rel="noopener">理解Linux系统负荷</a></h2><p>作者： 阮一峰<br>日期： 2011年7月31日</p>
<p>一、查看系统负荷</p>
<p>如果你的电脑很慢，你或许想查看一下，它的工作量是否太大了。</p>
<p>在Linux系统中，我们一般使用uptime命令查看（w命令和top命令也行）。（另外，它们在苹果公司的Mac电脑上也适用。）</p>
<p>你在终端窗口键入uptime，系统会返回一行信息。</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/201107/bg2011073001.png" alt></p>
<p>这行信息的后半部分，显示”load average”，它的意思是”系统的平均负荷”，里面有三个数字，我们可以从中判断系统负荷是大还是小。</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/201107/bg2011073003.png" alt></p>
<p>为什么会有三个数字呢？你从手册中查到，它们的意思分别是1分钟、5分钟、15分钟内系统的平均负荷。</p>
<p>如果你继续看手册，它还会告诉你，当CPU完全空闲的时候，平均负荷为0；当CPU工作量饱和的时候，平均负荷为1。</p>
<p>那么很显然，”load average”的值越低，比如等于0.2或0.3，就说明电脑的工作量越小，系统负荷比较轻。</p>
<p>但是，什么时候能看出系统负荷比较重呢？等于1的时候，还是等于0.5或等于1.5的时候？如果1分钟、5分钟、15分钟三个值不一样，怎么办？</p>
<p>二、一个类比</p>
<p>判断系统负荷是否过重，必须理解load average的真正含义。下面，我根据”Understanding Linux CPU Load”这篇文章，尝试用最通俗的语言，解释这个问题。</p>
<p>首先，假设最简单的情况，你的电脑只有一个CPU，所有的运算都必须由这个CPU来完成。</p>
<p>那么，我们不妨把这个CPU想象成一座大桥，桥上只有一根车道，所有车辆都必须从这根车道上通过。（很显然，这座桥只能单向通行。）</p>
<p>系统负荷为0，意味着大桥上一辆车也没有。<br><img data-src="http://www.ruanyifeng.com/blogimg/asset/201107/bg2011073004.png" alt></p>
<p>系统负荷为0.5，意味着大桥一半的路段有车。<br><img data-src="http://www.ruanyifeng.com/blogimg/asset/201107/bg2011073005.png" alt></p>
<p>系统负荷为1.0，意味着大桥的所有路段都有车，也就是说大桥已经”满”了。但是必须注意的是，直到此时大桥还是能顺畅通行的。<br><img data-src="http://www.ruanyifeng.com/blogimg/asset/201107/bg2011073006.png" alt></p>
<p>系统负荷为1.7，意味着车辆太多了，大桥已经被占满了（100%），后面等着上桥的车辆为桥面车辆的70%。以此类推，系统负荷2.0，意味着等待上桥的车辆与桥面的车辆一样多；系统负荷3.0，意味着等待上桥的车辆是桥面车辆的2倍。总之，当系统负荷大于1，后面的车辆就必须等待了；系统负荷越大，过桥就必须等得越久。<br><img data-src="http://www.ruanyifeng.com/blogimg/asset/201107/bg2011073007.png" alt></p>
<blockquote>
<p>CPU的系统负荷，基本上等同于上面的类比。大桥的通行能力，就是CPU的最大工作量；桥梁上的车辆，就是一个个等待CPU处理的进程（process）。</p>
</blockquote>
<p>如果CPU每分钟最多处理100个进程，那么系统负荷0.2，意味着CPU在这1分钟里只处理20个进程；系统负荷1.0，意味着CPU在这1分钟里正好处理100个进程；系统负荷1.7，意味着除了CPU正在处理的100个进程以外，还有70个进程正排队等着CPU处理。</p>
<p>为了电脑顺畅运行，系统负荷最好不要超过1.0，这样就没有进程需要等待了，所有进程都能第一时间得到处理。很显然，1.0是一个关键值，超过这个值，系统就不在最佳状态了，你要动手干预了。</p>
<p>三、系统负荷的经验法则</p>
<p>1.0是系统负荷的理想值吗？</p>
<p>不一定，系统管理员往往会留一点余地，当这个值达到0.7，就应当引起注意了。经验法则是这样的：</p>
<p>当系统负荷持续大于0.7，你必须开始调查了，问题出在哪里，防止情况恶化。</p>
<p>当系统负荷持续大于1.0，你必须动手寻找解决办法，把这个值降下来。</p>
<p>当系统负荷达到5.0，就表明你的系统有很严重的问题，长时间没有响应，或者接近死机了。你不应该让系统达到这个值。</p>
<p>四、多处理器</p>
<p>上面，我们假设你的电脑只有1个CPU。如果你的电脑装了2个CPU，会发生什么情况呢？</p>
<p>2个CPU，意味着电脑的处理能力翻了一倍，能够同时处理的进程数量也翻了一倍。</p>
<p>还是用大桥来类比，两个CPU就意味着大桥有两根车道了，通车能力翻倍了。</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/201107/bg2011073008.png" alt></p>
<p>所以，2个CPU表明系统负荷可以达到2.0，此时每个CPU都达到100%的工作量。推广开来，n个CPU的电脑，可接受的系统负荷最大为n.0。</p>
<p>五、多核处理器</p>
<p>芯片厂商往往在一个CPU内部，包含多个CPU核心，这被称为多核CPU。</p>
<blockquote>
<p>在系统负荷方面，多核CPU与多CPU效果类似，所以考虑系统负荷的时候，必须考虑这台电脑有几个CPU、每个CPU有几个核心。然后，把系统负荷除以总的核心数，只要每个核心的负荷不超过1.0，就表明电脑正常运行。</p>
</blockquote>
<p>怎么知道电脑有多少个CPU核心呢？</p>
<p>“cat /proc/cpuinfo”命令，可以查看CPU信息。”grep -c ‘model name’ /proc/cpuinfo”命令，直接返回CPU的总核心数。</p>
<p>六、最佳观察时长</p>
<p>最后一个问题，”load average”一共返回三个平均值—-1分钟系统负荷、5分钟系统负荷，15分钟系统负荷，—-应该参考哪个值？</p>
<p>如果只有1分钟的系统负荷大于1.0，其他两个时间段都小于1.0，这表明只是暂时现象，问题不大。</p>
<p>如果15分钟内，平均系统负荷大于1.0（调整CPU核心数之后），表明问题持续存在，不是暂时现象。所以，你应该主要观察”15分钟系统负荷”，将它作为电脑正常运行的指标。</p>
<p>==========================================</p>
<p>[参考文献]</p>
<ol>
<li><p>Understanding Linux CPU Load</p>
</li>
<li><p>Wikipedia - Load (computing)</p>
</li>
</ol>
<p>（完）</p>
<h2 id="SSH原理与运用（一）：远程登录"><a href="#SSH原理与运用（一）：远程登录" class="headerlink" title="SSH原理与运用（一）：远程登录"></a><a href="http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html" target="_blank" rel="noopener">SSH原理与运用（一）：远程登录</a></h2><p>作者： 阮一峰<br>日期： 2011年12月21日</p>
<p>SSH是每一台Linux电脑的标准配置。</p>
<p>随着Linux设备从电脑逐渐扩展到手机、外设和家用电器，SSH的使用范围也越来越广。不仅程序员离不开它，很多普通用户也每天使用。</p>
<p>SSH具备多种功能，可以用于很多场合。有些事情，没有它就是办不成。本文是我的学习笔记，总结和解释了SSH的常见用法，希望对大家有用。</p>
<p>虽然本文内容只涉及初级应用，较为简单，但是需要读者具备最基本的”Shell知识”和了解”公钥加密”的概念。如果你对它们不熟悉，我推荐先阅读《UNIX / Linux 初学者教程》和《数字签名是什么？》。</p>
<p>=======================================</p>
<p>SSH原理与运用</p>
<p>作者：阮一峰</p>
<p>一、什么是SSH？</p>
<blockquote>
<p>简单说，SSH是一种网络协议，用于计算机之间的加密登录。</p>
</blockquote>
<p>如果一个用户从本地计算机，使用SSH协议登录另一台远程计算机，我们就可以认为，这种登录是安全的，即使被中途截获，密码也不会泄露。</p>
<p>最早的时候，互联网通信都是明文通信，一旦被截获，内容就暴露无疑。1995年，芬兰学者Tatu Ylonen设计了SSH协议，将登录信息全部加密，成为互联网安全的一个基本解决方案，迅速在全世界获得推广，目前已经成为Linux系统的标准配置。</p>
<p>需要指出的是，SSH只是一种协议，存在多种实现，既有商业实现，也有开源实现。本文针对的实现是OpenSSH，它是自由软件，应用非常广泛。</p>
<p>此外，本文只讨论SSH在Linux Shell中的用法。如果要在Windows系统中使用SSH，会用到另一种软件PuTTY，这需要另文介绍。</p>
<p>二、最基本的用法</p>
<p>SSH主要用于远程登录。假定你要以用户名user，登录远程主机host，只要一条简单命令就可以了。</p>
<p>　　$ ssh user@host</p>
<p>如果本地用户名与远程用户名一致，登录时可以省略用户名。</p>
<p>　　$ ssh host</p>
<p>SSH的默认端口是22，也就是说，你的登录请求会送进远程主机的22端口。使用p参数，可以修改这个端口。</p>
<p>　　$ ssh -p 2222 user@host</p>
<p>上面这条命令表示，ssh直接连接远程主机的2222端口。</p>
<p>三、中间人攻击</p>
<p>SSH之所以能够保证安全，原因在于它采用了公钥加密。</p>
<blockquote>
<p>整个过程是这样的：（1）远程主机收到用户的登录请求，把自己的公钥发给用户。（2）用户使用这个公钥，将登录密码加密后，发送回来。（3）远程主机用自己的私钥，解密登录密码，如果密码正确，就同意用户登录。</p>
</blockquote>
<p>这个过程本身是安全的，但是实施的时候存在一个风险：如果有人截获了登录请求，然后冒充远程主机，将伪造的公钥发给用户，那么用户很难辨别真伪。因为不像https协议，SSH协议的公钥是没有证书中心（CA）公证的，也就是说，都是自己签发的。</p>
<p>可以设想，如果攻击者插在用户与远程主机之间（比如在公共的wifi区域），用伪造的公钥，获取用户的登录密码。再用这个密码登录远程主机，那么SSH的安全机制就荡然无存了。这种风险就是著名的”中间人攻击”（Man-in-the-middle attack）。</p>
<p>SSH协议是如何应对的呢？</p>
<p>四、口令登录</p>
<p>如果你是第一次登录对方主机，系统会出现下面的提示：</p>
<p>　　$ ssh user@host</p>
<p>　　The authenticity of host ‘host (12.18.429.21)’ can’t be established.</p>
<p>　　RSA key fingerprint is 98:2e:d7:e0:de:9f:ac:67:28:c2:42:2d:37:16:58:4d.</p>
<p>　　Are you sure you want to continue connecting (yes/no)?</p>
<p>这段话的意思是，无法确认host主机的真实性，只知道它的公钥指纹，问你还想继续连接吗？</p>
<p>所谓”公钥指纹”，是指公钥长度较长（这里采用RSA算法，长达1024位），很难比对，所以对其进行MD5计算，将它变成一个128位的指纹。上例中是98:2e:d7:e0:de:9f:ac:67:28:c2:42:2d:37:16:58:4d，再进行比较，就容易多了。</p>
<p>很自然的一个问题就是，用户怎么知道远程主机的公钥指纹应该是多少？回答是没有好办法，<strong>远程主机必须在自己的网站上贴出公钥指纹，以便用户自行核对。</strong></p>
<p>假定经过风险衡量以后，用户决定接受这个远程主机的公钥。</p>
<p>　　Are you sure you want to continue connecting (yes/no)? yes</p>
<p>系统会出现一句提示，表示host主机已经得到认可。</p>
<p>　　Warning: Permanently added ‘host,12.18.429.21’ (RSA) to the list of known hosts.</p>
<p>然后，会要求输入密码。</p>
<p>　　Password: (enter password)</p>
<p>如果密码正确，就可以登录了。</p>
<p>当远程主机的公钥被接受以后，它就会被保存在文件$HOME/.ssh/known_hosts之中。下次再连接这台主机，系统就会认出它的公钥已经保存在本地了，从而跳过警告部分，直接提示输入密码。</p>
<p>每个SSH用户都有自己的known_hosts文件，此外系统也有一个这样的文件，通常是/etc/ssh/ssh_known_hosts，保存一些对所有用户都可信赖的远程主机的公钥。</p>
<p>五、公钥登录</p>
<p>使用密码登录，每次都必须输入密码，非常麻烦。好在SSH还提供了公钥登录，可以省去输入密码的步骤。</p>
<blockquote>
<p>所谓”公钥登录”，原理很简单，就是用户将自己的公钥储存在远程主机上。登录的时候，远程主机会向用户发送一段随机字符串，用户用自己的私钥加密后，再发回来。远程主机用事先储存的公钥进行解密，如果成功，就证明用户是可信的，直接允许登录shell，不再要求密码。</p>
</blockquote>
<p>这种方法要求用户必须提供自己的公钥。如果没有现成的，可以直接用ssh-keygen生成一个：</p>
<p>　　$ ssh-keygen</p>
<p>运行上面的命令以后，系统会出现一系列提示，可以一路回车。其中有一个问题是，要不要对私钥设置口令（passphrase），如果担心私钥的安全，这里可以设置一个。</p>
<p>运行结束以后，在$HOME/.ssh/目录下，会新生成两个文件：id_rsa.pub和id_rsa。前者是你的公钥，后者是你的私钥。</p>
<p>这时再输入下面的命令，将公钥传送到远程主机host上面：</p>
<p>　　$ ssh-copy-id user@host</p>
<p>好了，从此你再登录，就不需要输入密码了。</p>
<p>如果还是不行，就打开远程主机的/etc/ssh/sshd_config这个文件，检查下面几行前面”#”注释是否取掉。</p>
<p>　　RSAAuthentication yes<br>　　PubkeyAuthentication yes<br>　　AuthorizedKeysFile .ssh/authorized_keys</p>
<p>然后，重启远程主机的ssh服务。</p>
<p>　　// ubuntu系统<br>　　service ssh restart</p>
<p>　　// debian系统<br>　　/etc/init.d/ssh restart</p>
<p>六、authorized_keys文件</p>
<p>远程主机将用户的公钥，保存在登录后的用户主目录的$HOME/.ssh/authorized_keys文件中。公钥就是一段字符串，只要把它追加在authorized_keys文件的末尾就行了。</p>
<p>这里不使用上面的ssh-copy-id命令，改用下面的命令，解释公钥的保存过程：</p>
<p>　　$ ssh user@host ‘mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys’ &lt; ~/.ssh/id_rsa.pub</p>
<p>这条命令由多个语句组成，依次分解开来看：（1）”$ ssh user@host”，表示登录远程主机；（2）单引号中的mkdir .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys，表示登录后在远程shell上执行的命令：（3）”$ mkdir -p .ssh”的作用是，如果用户主目录中的.ssh目录不存在，就创建一个；（4）’cat &gt;&gt; .ssh/authorized_keys’ &lt; ~/.ssh/id_rsa.pub的作用是，将本地的公钥文件~/.ssh/id_rsa.pub，重定向追加到远程文件authorized_keys的末尾。</p>
<p>写入authorized_keys文件后，公钥登录的设置就完成了。</p>
<p>==============================================</p>
<p>关于shell远程登录的部分就写到这里，下一次接着介绍《远程操作和端口转发》。</p>
<p>（完）</p>
<h2 id="SSH原理与运用（二）：远程操作与端口转发"><a href="#SSH原理与运用（二）：远程操作与端口转发" class="headerlink" title="SSH原理与运用（二）：远程操作与端口转发"></a><a href="http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html" target="_blank" rel="noopener">SSH原理与运用（二）：远程操作与端口转发</a></h2><p>作者： 阮一峰<br>日期： 2011年12月23日</p>
<p>接着前一次的文章，继续介绍SSH的用法。</p>
<p>=======================================</p>
<p>SSH原理与运用（二）：远程操作与端口转发</p>
<p>作者：阮一峰</p>
<p><img data-src="http://www.ruanyifeng.com/blogimg/asset/201112/bg2011122301.jpg" alt></p>
<p>七、远程操作</p>
<blockquote>
<p>SSH不仅可以用于远程主机登录，还可以直接在远程主机上执行操作。</p>
</blockquote>
<p>上一节的操作，就是一个例子：</p>
<p>　　$ ssh user@host ‘mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys’ &lt; ~/.ssh/id_rsa.pub</p>
<p>单引号中间的部分，表示在远程主机上执行的操作；后面的输入重定向，表示数据通过SSH传向远程主机。</p>
<p>这就是说，SSH可以在用户和远程主机之间，建立命令和数据的传输通道，因此很多事情都可以通过SSH来完成。</p>
<p>下面看几个例子。</p>
<p>【例1】</p>
<p>将$HOME/src/目录下面的所有文件，复制到远程主机的$HOME/src/目录。</p>
<p>　　$ cd &amp;&amp; tar czv src | ssh user@host ‘tar xz’</p>
<p>【例2】</p>
<p>将远程主机$HOME/src/目录下面的所有文件，复制到用户的当前目录。</p>
<p>　　$ ssh user@host ‘tar cz src’ | tar xzv</p>
<p>【例3】</p>
<p>查看远程主机是否运行进程httpd。</p>
<p>　　$ ssh user@host ‘ps ax | grep [h]ttpd’</p>
<p>八、绑定本地端口</p>
<p>既然SSH可以传送数据，那么我们可以让那些不加密的网络连接，全部改走SSH连接，从而提高安全性。</p>
<p>假定我们要让8080端口的数据，都通过SSH传向远程主机，命令就这样写：</p>
<p>　　$ ssh -D 8080 user@host</p>
<p>SSH会建立一个socket，去监听本地的8080端口。一旦有数据传向那个端口，就自动把它转移到SSH连接上面，发往远程主机。可以想象，如果8080端口原来是一个不加密端口，现在将变成一个加密端口。</p>
<p>九、本地端口转发</p>
<p>有时，绑定本地端口还不够，还必须指定数据传送的目标主机，从而形成点对点的”端口转发”。为了区别后文的”远程端口转发”，我们把这种情况称为”本地端口转发”（Local forwarding）。</p>
<p>假定host1是本地主机，host2是远程主机。由于种种原因，这两台主机之间无法连通。但是，另外还有一台host3，可以同时连通前面两台主机。因此，很自然的想法就是，通过host3，将host1连上host2。</p>
<p>我们在host1执行下面的命令：</p>
<p>　　$ ssh -L 2121:host2:21 host3</p>
<p>命令中的L参数一共接受三个值，分别是”本地端口:目标主机:目标主机端口”，它们之间用冒号分隔。这条命令的意思，就是指定SSH绑定本地端口2121，然后指定host3将所有的数据，转发到目标主机host2的21端口（假定host2运行FTP，默认端口为21）。</p>
<p>这样一来，我们只要连接host1的2121端口，就等于连上了host2的21端口。</p>
<p>　　$ ftp localhost:2121</p>
<p>“本地端口转发”使得host1和host3之间仿佛形成一个数据传输的秘密隧道，因此又被称为”SSH隧道”。</p>
<p>下面是一个比较有趣的例子。</p>
<p>　　$ ssh -L 5900:localhost:5900 host3</p>
<p>它表示将本机的5900端口绑定host3的5900端口（这里的localhost指的是host3，因为目标主机是相对host3而言的）。</p>
<p>另一个例子是通过host3的端口转发，ssh登录host2。</p>
<p>　　$ ssh -L 9001:host2:22 host3</p>
<p>这时，只要ssh登录本机的9001端口，就相当于登录host2了。</p>
<p>　　$ ssh -p 9001 localhost</p>
<p>上面的-p参数表示指定登录端口。</p>
<p>十、远程端口转发</p>
<p>既然”本地端口转发”是指绑定本地端口的转发，那么”远程端口转发”（remote forwarding）当然是指绑定远程端口的转发。</p>
<p>还是接着看上面那个例子，host1与host2之间无法连通，必须借助host3转发。但是，特殊情况出现了，host3是一台内网机器，它可以连接外网的host1，但是反过来就不行，外网的host1连不上内网的host3。这时，”本地端口转发”就不能用了，怎么办？</p>
<p>解决办法是，既然host3可以连host1，那么就从host3上建立与host1的SSH连接，然后在host1上使用这条连接就可以了。</p>
<p>我们在host3执行下面的命令：</p>
<p>　　$ ssh -R 2121:host2:21 host1</p>
<p>R参数也是接受三个值，分别是”远程主机端口:目标主机:目标主机端口”。这条命令的意思，就是让host1监听它自己的2121端口，然后将所有数据经由host3，转发到host2的21端口。由于对于host3来说，host1是远程主机，所以这种情况就被称为”远程端口绑定”。</p>
<p>绑定之后，我们在host1就可以连接host2了：</p>
<p>　　$ ftp localhost:2121</p>
<p>这里必须指出，”远程端口转发”的前提条件是，host1和host3两台主机都有sshD和ssh客户端。</p>
<p>十一、SSH的其他参数</p>
<p>SSH还有一些别的参数，也值得介绍。</p>
<p>N参数，表示只连接远程主机，不打开远程shell；T参数，表示不为这个连接分配TTY。这个两个参数可以放在一起用，代表这个SSH连接只用来传数据，不执行远程操作。</p>
<p>　　$ ssh -NT -D 8080 host</p>
<p>f参数，表示SSH连接成功后，转入后台运行。这样一来，你就可以在不中断SSH连接的情况下，在本地shell中执行其他操作。</p>
<p>　　$ ssh -f -D 8080 host</p>
<p>要关闭这个后台连接，就只有用kill命令去杀掉进程。</p>
<p>十二、参考文献</p>
<p>　　* SSH, The Secure Shell: The Definitive Guide: 2.4. Authentication by Cryptographic Key, O’reilly</p>
<p>　　* SSH, The Secure Shell: The Definitive Guide: 9.2. Port Forwarding, O’reilly</p>
<p>　　* Shebang: Tips for Remote Unix Work (SSH, screen, and VNC)</p>
<p>　　* brihatch: SSH Host Key Protection</p>
<p>　　* brihatch: SSH User Identities</p>
<p>　　* IBM developerWorks: 实战 SSH 端口转发</p>
<p>　　* Jianing YANG：ssh隧道技术简介</p>
<p>　　* WikiBooks: Internet Technologies/SSH</p>
<p>　　* Buddhika Chamith: SSH Tunneling Explained</p>
<p>（完）</p>

    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/Technology/2020/Linux/" rel="bookmark">Linux</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/Technology/IPCreator/Technology/Program/Tools/Linux/the-basic-concepts-of-linux-server/" rel="bookmark">The Basic Concepts of Linux Server</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/Technology/IPCreator/Technology/Program/Tools/Linux/the-basic-concepts-of-linux/" rel="bookmark">The Basic Concepts of Linux</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/Technology/IPCreator/Technology/Program/Tools/Linux/linux-trouble-resolver/" rel="bookmark">Linux Trouble Resolver</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/Technology/IPCreator/Technology/Program/Android/linux-tips/" rel="bookmark">Top Commands of Linux</a></div>
    </li>
  </ul>


      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a>
          </div>

        
  <div class="post-widgets">
    <div class="wp_rating">
      <div id="wpac-rating"></div>
    </div>
  </div>


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/Program/IPCreator/Technology/Program/Computer/Dos/" rel="prev" title="Dos">
      <i class="fa fa-chevron-left"></i> Dos
    </a></div>
      <div class="post-nav-item">
    <a href="/Program/IPCreator/Technology/Program/Computer/Filesystem/" rel="next" title="Filesystem">
      Filesystem <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#User-space-与-Kernel-space"><span class="nav-number">1.</span> <span class="nav-text">User space 与 Kernel space</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#如何读懂火焰图？"><span class="nav-number">2.</span> <span class="nav-text">如何读懂火焰图？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-的启动流程"><span class="nav-number">3.</span> <span class="nav-text">Linux 的启动流程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-守护进程的启动方法"><span class="nav-number">4.</span> <span class="nav-text">Linux 守护进程的启动方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Systemd-入门教程：命令篇"><span class="nav-number">5.</span> <span class="nav-text">Systemd 入门教程：命令篇</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Systemd-入门教程：实战篇"><span class="nav-number">6.</span> <span class="nav-text">Systemd 入门教程：实战篇</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Systemd-定时器教程"><span class="nav-number">7.</span> <span class="nav-text">Systemd 定时器教程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#理解Linux系统负荷"><span class="nav-number">8.</span> <span class="nav-text">理解Linux系统负荷</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SSH原理与运用（一）：远程登录"><span class="nav-number">9.</span> <span class="nav-text">SSH原理与运用（一）：远程登录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SSH原理与运用（二）：远程操作与端口转发"><span class="nav-number">10.</span> <span class="nav-text">SSH原理与运用（二）：远程操作与端口转发</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="IPCreator"
      src="/img/content/Kick-Off.jpg">
  <p class="site-author-name" itemprop="name">IPCreator</p>
  <div class="site-description" itemprop="description">Life is a journey.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">1556</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1458</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/IPCreator1833" title="GitHub → https://github.com/IPCreator1833" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → /atom.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://blog.163.com/zhuxuanlv@126/" title="http://blog.163.com/zhuxuanlv@126/" rel="noopener" target="_blank">163 Blog</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2017 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="far fa-smile"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">IPCreator</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">28.1m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">426:12</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  



  <script>
  if (CONFIG.page.isPost) {
    wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id    : 11184,
      el    : 'wpac-rating',
      color : 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();
  }
  </script>

  <script src="/js/local-search.js"></script>












  

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://hazyman.com/Program/IPCreator/Technology/Program/Computer/Linux/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'C75jI23HEPhTehiFhCvUSbJY-gzGzoHsz',
      appKey     : 'qy3Id9srq8HBxwKg3CVSdNNq',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
